<UserControl x:Class="C_TestForge.UI.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:C_TestForge.UI.Views"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1200"
             Background="{StaticResource AppBackground}">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <TextBlock Grid.Row="0" Text="Settings" 
                     Style="{StaticResource HeadingStyle}" Margin="0,0,0,24"/>

            <!-- Settings Content -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="320"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Settings Categories -->
                <materialDesign:Card Grid.Column="0" UniformCornerRadius="8" Margin="0,0,16,0">
                    <ListView BorderThickness="0" Padding="0">
                        <ListViewItem Height="56">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Application" VerticalAlignment="Center" Width="24" Height="24" Margin="0,0,16,0"/>
                                <TextBlock Text="General" VerticalAlignment="Center" FontSize="15"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Height="56">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ThemeLightDark" VerticalAlignment="Center" Width="24" Height="24" Margin="0,0,16,0"/>
                                <TextBlock Text="Appearance" VerticalAlignment="Center" FontSize="15"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Height="56">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="CodeBraces" VerticalAlignment="Center" Width="24" Height="24" Margin="0,0,16,0"/>
                                <TextBlock Text="Source Analysis" VerticalAlignment="Center" FontSize="15"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Height="56">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="TestTube" VerticalAlignment="Center" Width="24" Height="24" Margin="0,0,16,0"/>
                                <TextBlock Text="Test Generation" VerticalAlignment="Center" FontSize="15"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Height="56">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Update" VerticalAlignment="Center" Width="24" Height="24" Margin="0,0,16,0"/>
                                <TextBlock Text="Updates" VerticalAlignment="Center" FontSize="15"/>
                            </StackPanel>
                        </ListViewItem>
                    </ListView>
                </materialDesign:Card>

                <!-- Settings Details -->
                <materialDesign:Card Grid.Column="1" UniformCornerRadius="8">
                    <Grid Margin="24">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- General Settings -->
                        <TextBlock Grid.Row="0" Text="General Settings" 
                                 FontSize="20" FontWeight="Medium" Margin="0,0,0,16"/>

                        <!-- Settings Group -->
                        <GroupBox Grid.Row="1" Header="Project Defaults" 
                                materialDesign:ColorZoneAssist.Mode="Standard"
                                Margin="0,0,0,16">
                            <StackPanel Margin="8,16">
                                <!-- Dự án hiện tại -->
                                <TextBlock Text="Dự án hiện tại" FontWeight="SemiBold" Margin="0,0,0,4"/>
                                <ComboBox ItemsSource="{Binding Projects}"
                                          SelectedItem="{Binding SelectedProject, Mode=TwoWay}"
                                          DisplayMemberPath="Name"
                                          materialDesign:HintAssist.Hint="Chọn dự án hiện tại"
                                          Margin="0,0,0,8"/>

                                <!-- Đường dẫn thư mục dự án mặc định -->
                                <TextBlock Text="Thư mục dự án mặc định" FontWeight="SemiBold" Margin="0,8,0,4"/>
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox Grid.Column="0" materialDesign:HintAssist.Hint="Default Project Location"
                                             Text="{Binding DefaultProjectLocation, UpdateSourceTrigger=PropertyChanged}"/>
                                    <Button Grid.Column="1" Style="{StaticResource MaterialDesignOutlinedButton}"
                                            Content="Browse..." Command="{Binding BrowseFolderCommand}" Margin="8,0,0,0"/>
                                </Grid>

                                <!-- Các tuỳ chọn khác -->
                                <CheckBox Content="Tự động lưu dự án sau khi thay đổi" 
                                          IsChecked="{Binding AutoSave}" Margin="0,8,0,0"/>
                                <CheckBox Content="Tạo bản sao lưu trước khi lưu" 
                                          Margin="0,4,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Settings Group -->
                        <GroupBox Grid.Row="2" Header="Editor Settings" 
                                materialDesign:ColorZoneAssist.Mode="Standard"
                                Margin="0,0,0,16">
                            <StackPanel Margin="8,16">
                                <ComboBox materialDesign:HintAssist.Hint="Font Family"
                                        SelectedIndex="0" Margin="0,8">
                                    <ComboBoxItem Content="Cascadia Code"/>
                                    <ComboBoxItem Content="Consolas"/>
                                    <ComboBoxItem Content="Source Code Pro"/>
                                    <ComboBoxItem Content="Fira Code"/>
                                </ComboBox>

                                <ComboBox materialDesign:HintAssist.Hint="Font Size"
                                        SelectedIndex="2" Margin="0,8">
                                    <ComboBoxItem Content="10"/>
                                    <ComboBoxItem Content="11"/>
                                    <ComboBoxItem Content="12"/>
                                    <ComboBoxItem Content="14"/>
                                    <ComboBoxItem Content="16"/>
                                </ComboBox>

                                <CheckBox Content="Enable line numbers" 
                                        IsChecked="True" Margin="0,8"/>
                                
                                <CheckBox Content="Enable syntax highlighting" 
                                        IsChecked="True" Margin="0,8"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Settings Group -->
                        <GroupBox Grid.Row="3" Header="Analysis Settings" 
                                materialDesign:ColorZoneAssist.Mode="Standard"
                                Margin="0,0,0,16">
                            <StackPanel Margin="8,16">
                                <CheckBox Content="Analyze preprocessor definitions" 
                                        IsChecked="True" Margin="0,8"/>
                                
                                <CheckBox Content="Analyze variables" 
                                        IsChecked="True" Margin="0,8"/>
                                
                                <CheckBox Content="Analyze functions" 
                                        IsChecked="True" Margin="0,8"/>
                                
                                <CheckBox Content="Analyze function relationships" 
                                        IsChecked="True" Margin="0,8"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Save Button -->
                        <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,24,0,0">
                            <!-- Bind Reset to Default Button -->
                            <Button Content="Reset to Default" Style="{StaticResource SecondaryButtonStyle}" Margin="8,0"
                                    Command="{Binding ResetToDefaultCommand}"/>

                            <!-- Bind Save Changes Button -->
                            <Button Content="Save Changes" Style="{StaticResource PrimaryButtonStyle}" Margin="8,0"
                                    Command="{Binding SaveSettingsCommand}"/>
                        </StackPanel>
                    </Grid>
                </materialDesign:Card>
            </Grid>
        </Grid>
    </ScrollViewer>
</UserControl>